<!DOCTYPE html>
<html lang="en" data-theme="default" data-case="lower" data-projector="off" data-motion="fun" data-board-style="card" data-key-style="bubble" data-atmosphere="glow">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Word Quest</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Atkinson Hyperlegible: distinct I/l/1, designed for low-vision readers -->
  <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400&family=Nunito:wght@800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style/modes.css?v=20260222">
  <link rel="stylesheet" href="style/themes.css?v=20260222">
  <link rel="stylesheet" href="style/components.css?v=20260222">
</head>
<body>

  <div id="loading-screen"><div class="spinner"></div><span>Loadingâ€¦</span></div>

  <!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header>
    <div class="logo">Word<span>Quest</span></div>
    <div class="header-right">
      <button id="settings-btn" class="icon-btn" title="Settings" aria-label="Settings">
        <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
      </button>
      <button id="new-game-btn">New Word</button>
    </div>
  </header>

  <!-- â”€â”€ Focus bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="focus-bar">
    <span class="focus-label">Focus</span>
    <select id="setting-focus">
      <option value="all">â€” Classic (Wordle 5x6) â€”</option>
      <optgroup label="SoR Phonics">
        <option value="cvc">CVC Â· Short Vowels</option>
        <option value="digraph">Digraphs Â· sh, ch, th</option>
        <option value="ccvc">Initial Blends Â· st, bl, tr</option>
        <option value="cvcc">Final Blends Â· mp, nd, st</option>
        <option value="trigraph">Trigraphs Â· tch, dge, igh</option>
        <option value="cvce">Magic E Â· CVCe</option>
        <option value="vowel_team">Vowel Teams Â· ai, ee, oa</option>
        <option value="r_controlled">R-Controlled Â· ar, or, er</option>
        <option value="diphthong">Diphthongs Â· oi, oy, ou</option>
        <option value="floss">FLOSS Rule Â· ff, ll, ss</option>
        <option value="welded">Welded Sounds Â· -ang, -ing</option>
        <option value="schwa">Schwa</option>
        <option value="prefix">Prefixes Â· un-, re-, pre-</option>
        <option value="suffix">Suffixes Â· -ing, -ed, -er</option>
        <option value="compound">Compound Words</option>
        <option value="multisyllable">Multisyllabic Words</option>
      </optgroup>
      <optgroup label="Math"><option value="vocab-math-k2">Math Kâ€“2</option><option value="vocab-math-35">Math 3â€“5</option><option value="vocab-math-68">Math 6â€“8</option><option value="vocab-math-912">Math 9â€“12</option></optgroup>
      <optgroup label="Science"><option value="vocab-science-k2">Science Kâ€“2</option><option value="vocab-science-35">Science 3â€“5</option><option value="vocab-science-68">Science 6â€“8</option><option value="vocab-science-912">Science 9â€“12</option></optgroup>
      <optgroup label="Social Studies"><option value="vocab-social-k2">Social Studies Kâ€“2</option><option value="vocab-social-35">Social Studies 3â€“5</option><option value="vocab-social-68">Social Studies 6â€“8</option><option value="vocab-social-912">Social Studies 9â€“12</option></optgroup>
      <optgroup label="ELA"><option value="vocab-ela-k2">ELA Kâ€“2</option><option value="vocab-ela-35">ELA 3â€“5</option><option value="vocab-ela-68">ELA 6â€“8</option><option value="vocab-ela-912">ELA 9â€“12</option></optgroup>
    </select>
    <span id="focus-hint" class="focus-hint hidden"></span>
  </div>
  <div id="theme-preview-strip" class="theme-preview-strip" aria-label="Theme preview"></div>

  <!-- â”€â”€ Settings overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="settings-panel" class="settings-panel hidden">
    <div class="settings-header">
      <span>Settings</span>
      <button id="settings-close" class="close-btn" aria-label="Close settings">âœ•</button>
    </div>
    <div class="settings-body">
      <div class="settings-view-switch" role="tablist" aria-label="Settings view">
        <button id="settings-tab-quick" class="settings-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="settings-quick" data-settings-tab="quick">Quick</button>
        <button id="settings-tab-advanced" class="settings-tab" type="button" role="tab" aria-selected="false" aria-controls="settings-advanced" data-settings-tab="advanced">Advanced</button>
      </div>

      <section id="settings-quick" class="settings-section is-active" role="tabpanel" aria-labelledby="settings-tab-quick" data-settings-section="quick">
        <div class="settings-grid">
          <div class="setting-row"><label>Theme (full list)<select id="s-theme"><option value="">Loading themes...</option></select></label></div>
          <div class="setting-row"><label>Remember Theme<select id="s-theme-save"><option value="off" selected>Off (reset on refresh)</option><option value="on">On (save this theme)</option></select></label></div>
          <div class="setting-row setting-row-help">Use the Theme Preview arrows above to compare themes without opening a large dropdown.</div>
          <div class="setting-row"><label>Grade Band<select id="s-grade"><option value="all">All grades</option><option value="K-2">Kâ€“2</option><option value="G3-5">Grades 3â€“5</option><option value="G6-8">Grades 6â€“8</option><option value="G9-12">Grades 9â€“12</option></select></label></div>
          <div class="setting-row"><label>Word Length<select id="s-length"><option value="3">3</option><option value="4">4</option><option value="5" selected>5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="any">Any</option></select></label></div>
          <div class="setting-row"><label>Max Guesses<select id="s-guesses"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6" selected>6</option></select></label></div>
          <div id="focus-grade-note" class="setting-row setting-row-full setting-row-help">Classic uses Grade Band + Word Length. Subject Focus presets both domain and grade.</div>
          <div class="setting-row"><label>Feedback Colors<select id="s-feedback"><option value="themed" selected>Themed (matches theme)</option><option value="classic">Classic (green/yellow/gray)</option></select></label></div>
          <div class="setting-row"><label>Motion<select id="s-motion"><option value="fun">Fun</option><option value="calm">Calm</option><option value="reduced">Reduced</option></select></label></div>
          <div class="setting-row"><label>Voice Practice
            <select id="s-voice-task">
              <option value="optional" selected>Optional</option>
              <option value="required">Required before next word</option>
              <option value="off">Off</option>
            </select>
          </label></div>
          <div class="setting-row"><label>Engagement Popups<select id="s-boost-popups"><option value="on" selected>On</option><option value="off">Off</option></select></label></div>
          <div class="setting-row"><label>Music<select id="s-music"><option value="off" selected>Off</option><option value="auto">Auto (match theme)</option><option value="chill">Chill</option><option value="lofi">Loâ€‘fi</option><option value="upbeat">Upbeat</option><option value="coffee">Coffeehouse</option><option value="arcade">8â€‘bit Arcade</option><option value="fantasy">Fantasy</option><option value="scifi">Sciâ€‘fi</option><option value="sports">Sports Hype</option></select></label></div>
          <div id="s-music-active" class="setting-row setting-row-full setting-row-help">Auto picks a vibe from the active theme.</div>
          <div class="setting-row setting-row-full"><label>Music Volume<input id="s-music-vol" type="range" min="0" max="1" step="0.05" value="0.50"></label></div>
          <div class="setting-row setting-row-full">
            <label class="setting-checkbox-label">
              <input id="s-meaning-fun-link" type="checkbox" checked>
              Include extended definition add-on
            </label>
            <div class="setting-checkbox-help">Default on. Turn off for simple definition only.</div>
          </div>
        </div>
      </section>

      <section id="settings-advanced" class="settings-section" role="tabpanel" aria-labelledby="settings-tab-advanced" data-settings-section="advanced" hidden>
        <div class="settings-grid">
          <div class="setting-row"><label>Letter Case<select id="s-case"><option value="lower">lowercase</option><option value="upper">UPPERCASE</option></select></label></div>
          <div class="setting-row"><label>Phonics Hint<select id="s-hint"><option value="off">Off</option><option value="on">On</option></select></label></div>
          <div class="setting-row"><label>Duplicate Alert<select id="s-dupe"><option value="on">On</option><option value="off">Off</option></select></label></div>
          <div class="setting-row"><label>Win Confetti<select id="s-confetti"><option value="on">On</option><option value="off">Off</option></select></label></div>
          <div class="setting-row"><label>Projector Mode<select id="s-projector"><option value="off">Off</option><option value="on">On Â· high contrast</option></select></label></div>
          <div class="setting-row"><label>Board Style<select id="s-board-style"><option value="clean">Clean</option><option value="card" selected>Card</option><option value="patterned">Patterned</option></select></label></div>
          <div class="setting-row"><label>Key Style<select id="s-key-style"><option value="bubble" selected>Bubble</option><option value="classic">Classic</option><option value="arcade">Arcade</option></select></label></div>
          <div class="setting-row"><label>Atmosphere<select id="s-atmosphere"><option value="minimal">Minimal</option><option value="glow" selected>Glow</option><option value="spark">Spark</option></select></label></div>
          <div class="setting-row setting-row-full">
            <label class="setting-checkbox-label">
              <input id="s-sor-notation" type="checkbox" checked>
              Show SoR notation on reveal
            </label>
          </div>
          <div class="setting-row setting-row-full"><label>Audio Voice<select id="s-voice"><option value="recorded">Recorded only (recommended)</option><option value="auto">Recorded â†’ device fallback</option><option value="device">Device voice only (beta)</option></select></label></div>
          <div class="setting-row setting-row-full small-help"><button id="voice-help-btn" class="link-btn" type="button">How to improve device voice</button></div>
        </div>
      </section>
    </div>
  </div>

  <!-- â”€â”€ Main game area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main id="main">

    <!-- Board plate + grid -->
    <div class="board-zone">
      <div class="board-plate">
        <div id="game-board"></div>
      </div>

      <!-- Hear Word / Hear Sentence â€” visible during gameplay like old version -->
      <div class="gameplay-audio">
        <button class="audio-ghost-btn" id="g-hear-word">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
          Hear Word
        </button>
        <button class="audio-ghost-btn" id="g-hear-sentence">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          Hear Sentence
        </button>
      </div>
      <div id="midgame-boost" class="midgame-boost hidden" role="status" aria-live="polite"></div>
    </div>

    <!-- Keyboard -->
    <div id="keyboard"></div>

  </main>

  <div id="toast" role="alert" aria-live="polite"></div>
  <div id="celebrate-layer" class="celebrate-layer" aria-hidden="true"></div>
  <canvas id="confetti-canvas"></canvas>

  <!-- â”€â”€ End modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="modal-overlay" class="hidden">
    <div id="end-modal" class="hidden" role="dialog" aria-modal="true">
      <div id="modal-result"></div>
      <div id="modal-word"></div>
      <div class="modal-syllables-wrap">
        <div id="modal-syllables"></div>
        <div id="modal-sor" class="hidden"></div>
      </div>
      <div class="audio-row audio-row-core">
        <button class="audio-btn" id="hear-word-btn">ðŸ”Š Word</button>
        <button class="audio-btn" id="hear-def-btn">ðŸ“– Meaning</button>
      </div>
      <div id="modal-voice-practice" class="modal-voice-practice">
        <div class="voice-practice-head">
          <strong>ðŸŽ¤ Say It Back</strong>
          <span id="voice-practice-target"></span>
        </div>
        <canvas id="voice-waveform" width="320" height="74" aria-label="Voice waveform"></canvas>
        <div class="voice-practice-actions">
          <button class="audio-btn" id="voice-record-btn" type="button">Start Recording</button>
          <button class="audio-btn" id="voice-stop-btn" type="button" disabled>Stop</button>
          <button class="audio-btn" id="voice-play-btn" type="button" disabled>Play My Voice</button>
        </div>
        <div id="voice-practice-feedback" class="voice-practice-feedback" aria-live="polite">Record your voice, then compare it with the word audio.</div>
      </div>
      <details id="modal-more-details" class="modal-more-details">
        <summary>More details</summary>
        <div class="modal-more-body">
          <div id="modal-guesses"></div>
          <p id="modal-def"></p>
          <p id="modal-sentence"></p>
          <div id="modal-fun-wrap"><p id="modal-fun"></p></div>
          <div id="modal-badge"></div>
          <div class="audio-row">
            <button class="audio-btn" id="hear-sentence-btn">ðŸ’¬ Sentence</button>
          </div>
        </div>
      </details>
      <button id="play-again-btn">Play Again â†’</button>
    </div>
  </div>

  
  <!-- â”€â”€ Voice help modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="voice-help-modal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Improve device voice">
    <div class="modal-card">
      <div class="modal-head">
        <strong>Improve device voice quality</strong>
        <button id="voice-help-close" class="close-btn" aria-label="Close">âœ•</button>
      </div>
      <div class="modal-body">
        <p><b>Best quality (recommended):</b> use the recorded WordQuest audio whenever available.</p>
        <p>If you must use device voice as a fallback:</p>
        <ul>
          <li><b>iPhone/iPad:</b> Settings â†’ Accessibility â†’ Spoken Content â†’ Voices, download a higherâ€‘quality voice.</li>
          <li><b>Android (Samsung):</b> Settings â†’ Accessibility (or General management) â†’ Textâ€‘toâ€‘speech â†’ install/download highâ€‘quality voices.</li>
          <li><b>Chrome:</b> device voices vary; try switching to a different downloaded voice in your OS settings.</li>
        </ul>
        <p>WordQuest will <b>never autoâ€‘switch</b> to device voice unless you choose a fallback mode.</p>
      </div>
    </div>
  </div>

  <script src="data/words-inline.js"></script>
  <script src="data/engagement-boosts.js?v=20260222"></script>
  <script src="js/data.js?v=20260222"></script>
  <script src="js/audio.js?v=20260222"></script>
  <script src="js/game.js?v=20260222"></script>
  <script src="js/ui.js?v=20260222"></script>
  <script src="js/theme-registry.js?v=20260222"></script>
  <script src="js/app.js?v=20260222"></script>
  <script src="js/theme-nav.js"></script>
</body>
</html>
