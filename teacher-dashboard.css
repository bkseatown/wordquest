:root {
  --td-maxw: min(1120px, calc(100vw - 28px));
  --td-radius: 18px;
  --td-pad: 18px;
  --td-bg: rgba(18, 26, 38, 0.56);
  --td-border: rgba(255, 255, 255, 0.12);
  --td-text: rgba(255, 255, 255, 0.95);
  --td-subtext: rgba(255, 255, 255, 0.72);
}

* {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

html[data-page="teacher-dashboard"] body,
body.teacher-dashboard {
  margin: 0;
  overflow: hidden;
  background:
    radial-gradient(1200px 600px at 50% 15%, rgba(72, 140, 210, 0.28), transparent 65%),
    linear-gradient(145deg, #1c2d3f 0%, #22425a 46%, #1b3347 100%);
  color: var(--td-text);
}

.td-shell {
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  font-variant-numeric: tabular-nums lining-nums;
  font-feature-settings: "zero" 0;
  width: var(--td-maxw);
  height: 100vh;
  margin: 0 auto;
  padding: 12px 0;
  display: grid;
  grid-template-rows: auto auto minmax(0, 1fr) auto auto;
  gap: 14px;
  overflow: hidden;
}

.td-surface {
  background: var(--td-bg);
  border: 1px solid var(--td-border);
  border-radius: var(--td-radius);
  box-shadow: 0 14px 34px rgba(0, 0, 0, 0.28);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.td-head {
  padding: 8px 6px 0;
}

.td-title {
  margin: 0;
  font-size: clamp(2.25rem, 4vw, 2.75rem);
  line-height: 1.04;
  letter-spacing: -0.02em;
  font-weight: 780;
  color: var(--td-text);
}

.td-subtitle {
  margin: 6px 0 0;
  font-size: 0.92rem;
  color: var(--td-subtext);
}

.td-actions {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.btn-primary,
.btn-secondary {
  border-radius: 14px;
  padding: 10px 14px;
  font: inherit;
  font-weight: 700;
  line-height: 1;
  cursor: pointer;
  border: 1px solid transparent;
  color: #f4f8ff;
  transition: transform 160ms ease, filter 160ms ease;
}

.btn-primary {
  background: linear-gradient(180deg, #45b3ff, #2897e8);
  border-color: rgba(152, 221, 255, 0.55);
  color: #112236;
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
}

.btn-primary:hover,
.btn-secondary:hover {
  transform: translateY(-1px);
  filter: brightness(1.05);
}

.td-demo-flag,
.td-import-status {
  margin: 8px 2px 0;
  font-size: 0.75rem;
  color: rgba(223, 236, 251, 0.78);
}

.td-import-status.is-error {
  color: #ffd0d0;
}

.td-kpis {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}

.td-kpi {
  padding: 12px 14px;
}

.k-label {
  font-size: 0.78rem;
  color: var(--td-subtext);
}

.k-value {
  margin-top: 6px;
  font-size: clamp(1.1rem, 2vw, 1.34rem);
  font-weight: 800;
  color: var(--td-text);
}

.k-hint {
  margin-top: 4px;
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.62);
}

.td-grid {
  min-height: 0;
  display: grid;
  grid-template-columns: 1.45fr 0.85fr;
  gap: 12px;
}

.td-plan,
.td-groups {
  min-height: 0;
  padding: var(--td-pad);
}

.td-plan h2,
.td-groups h2,
.td-evidence h2,
.td-details h3 {
  margin: 0;
  font-size: 1rem;
  line-height: 1.2;
  font-weight: 800;
}

.td-plan-lede {
  margin: 10px 0 0;
  font-size: 1.15rem;
  font-weight: 800;
}

.td-steps {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}

.td-step {
  border-radius: 12px;
  padding: 10px 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.06);
  font-size: 0.88rem;
  color: rgba(255, 255, 255, 0.9);
}

.td-step-index {
  color: rgba(162, 216, 255, 0.92);
  font-weight: 800;
}

.td-plan-ctas {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.td-group-card {
  margin-top: 10px;
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.06);
}

.g-title {
  font-size: 0.86rem;
  font-weight: 800;
}

.g-need {
  margin-top: 6px;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.76);
}

.g-count {
  margin-top: 8px;
  font-size: 0.76rem;
  color: rgba(255, 255, 255, 0.62);
}

.td-evidence {
  min-height: 0;
}

.td-evidence-inner {
  padding: 12px 14px;
}

.td-evidence-list {
  margin-top: 10px;
  display: grid;
  gap: 8px;
}

.td-evidence-row {
  border-radius: 12px;
  padding: 10px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.05);
}

.e-head {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  font-size: 0.78rem;
}

.e-head span {
  color: rgba(255, 255, 255, 0.66);
}

.e-signal {
  margin-top: 4px;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.86);
}

.e-bar {
  margin-top: 8px;
  height: 6px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.13);
  overflow: hidden;
}

.e-fill {
  display: block;
  height: 100%;
}

.e-fill.is-strong {
  background: linear-gradient(90deg, #57e0a8, #4fcf86);
}

.e-fill.is-developing {
  background: linear-gradient(90deg, #ffdf66, #ffc14f);
}

.e-fill.is-emerging {
  background: linear-gradient(90deg, #ff9d87, #ff7369);
}

.td-details {
  min-height: 0;
}

.td-details > summary {
  list-style: none;
  cursor: pointer;
  user-select: none;
  border-radius: 14px;
  padding: 10px 14px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.06);
  font-size: 0.85rem;
  font-weight: 760;
}

.td-details > summary::-webkit-details-marker {
  display: none;
}

.td-details-panel {
  margin-top: 8px;
  padding: 12px;
  max-height: 210px;
  overflow: auto;
}

#td-heatmap-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 8px;
  font-size: 0.8rem;
}

#td-heatmap-table th,
#td-heatmap-table td {
  text-align: left;
  padding: 8px 7px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

#td-heatmap-table th {
  color: rgba(255, 255, 255, 0.72);
  font-size: 0.73rem;
}

@media (max-width: 1024px) {
  .td-shell {
    width: min(980px, calc(100vw - 24px));
    height: 100vh;
    margin: 0 auto;
    padding: 9px 0;
    gap: 10px;
  }

  .td-title {
    font-size: clamp(1.8rem, 4.1vw, 2.1rem);
  }

  .td-kpis {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .td-grid {
    grid-template-columns: 1fr;
  }

  .td-plan,
  .td-groups {
    padding: 14px;
  }

  .td-evidence-inner {
    max-height: 136px;
    overflow: auto;
  }
}

@media (max-width: 760px) {
  html[data-page="teacher-dashboard"] body,
  body.teacher-dashboard {
    overflow: auto;
  }

  .td-shell {
    height: auto;
    min-height: calc(100vh - 16px);
    grid-template-rows: auto;
    margin: 8px auto;
    padding: 0;
    overflow: visible;
  }

  .td-kpis {
    grid-template-columns: 1fr;
  }

  .td-actions .btn-primary,
  .td-actions .btn-secondary,
  .td-plan-ctas .btn-primary,
  .td-plan-ctas .btn-secondary {
    width: 100%;
  }
}
